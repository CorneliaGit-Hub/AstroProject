{% load custom_filters %}
<!DOCTYPE html>
<html lang="fr">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Résultats astrologiques</title>
<style>
/* Style des liens Connexion et S'inscrire */
.auth-links {
	display: flex;
	gap: 10px;
	margin-top: 20px; /* Marge supérieure pour éloigner des autres éléments */
	margin-bottom: 20px; 
	justify-content: flex-end; /* Aligne les liens à droite */
}

.auth-links a {
	background-color: #6A3D90; /* Couleur violette */
	color: white;
	padding: 8px 16px;
	border-radius: 5px;
	text-decoration: none;
	font-weight: bold;
	transition: background-color 0.3s ease;
}

.auth-links a:hover {
	background-color: #A9CE02; /* Couleur verte au survol */
}

/* BODY */
body {
	font-family: 'Arial', sans-serif;
	margin: 0;
	padding: 20px;
	background-color: #f9f9f9;
}

h2 {
	text-align: center;
	color: #333;
	font-size: 28px;
	margin-bottom: 20px;
}

.container {
	max-width: 85%;
	margin: 0 auto;
	background-color: #fff;
	padding: 30px;
	border-radius: 10px;
	box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
	transition: transform 0.3s ease-in-out;
}

.container:hover {
	transform: translateY(-10px);
}

.container img {
    width: 100%; /* Taille par défaut pour les petits et moyens écrans */
}

@media (min-width: 1024px) {
    .container img {
        width: 75%; /* Réduction de l'image uniquement sur les grands écrans */
        max-width: 600px; /* Limite la taille maximale de l'image */
    }
}

/* TABLE */
.table-container {
    margin-bottom: 20px; /* Espacement entre chaque table */
}

.table-wrapper-planetes,
.table-wrapper-maisons {
    width: 100%;

    margin: 0 auto;
}

@media (min-width: 768px) {
    .table-wrapper-planetes {
        width: 45%; /* Largeur moyenne pour les écrans de taille intermédiaire */
    }
}

@media (min-width: 1024px) {
    .table-wrapper-planetes {
        width: 35%;
    }
}



/* MAISONS */
    .table-wrapper-maisons {
        width: 100%; /* Largeur pour les petits écrans */
    }
	
@media (min-width: 768px) {
    .table-wrapper-maisons {
        width: 80%; /* Largeur moyenne pour les écrans de taille intermédiaire */
    }
}


@media (min-width: 900px) {
    .table-wrapper-maisons {
        width: 70%; /* Largeur moyenne pour les écrans de taille intermédiaire */
    }
}

@media (min-width: 1024px) {
    .table-wrapper-maisons {
        width: 55%;
    }
}



/* ASPECTS */
.table-wrapper-aspects {
    width: 100%; /* Largeur pour les petits écrans */
    margin: 0 auto;
}

@media (min-width: 576px) {
    .table-wrapper-aspects {
        width: 95%; /* Taille pour les écrans petits-moyens */
    }
}


@media (min-width: 950px) {
    .table-wrapper-aspects {
        width: 90%; /* Taille pour les écrans moyens */
    }
}

@media (min-width: 1024px) {
    .table-wrapper-aspects {
        width: 53%; /* Taille pour les grands écrans */
    }
}


table {
    width: 100%; /* La table occupe toute la largeur de la div */
    border-collapse: collapse;
    margin-bottom: 20px;
}

th, td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: center;
}

td {
    text-align: left;
}

th {
    background-color: #6A3D90;
    color: white;
}

tr:nth-child(even) {
    background-color: #f2f2f2;
}

/* BOUTON */
.div-bouton {
	width:60%;
	margin: 0 auto;
}

button {
    background-color: #6A3D90;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    display: block;
    width: 100%;
    margin-top: 20px;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

button:hover {
    background-color: #A9CE02;
    transform: scale(1.05);
}

button:active {
    transform: scale(0.95);
}

.long {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 400px;
    margin-bottom: 20px;
    padding: 10px;
    border: 1px solid #6A3D90;
    background-color: #f3f1fc;
    border-radius: 5px;
}

.long div {
    font-weight: bold;
    color: #333;
    font-size: 1.1em;
}

.long div strong {
    color: #6A3D90;
}
    </style>
</head>
<body>
<!-- Débogage - Affichage des données transmises -->
<div class="auth-links">
    {% if user.is_authenticated %}
        <a href="{% url 'deconnexion' %}">Déconnexion</a>
    {% else %}
        <a href="{% url 'connexion' %}">Connexion</a>
        <a href="{% url 'inscription' %}">S'inscrire</a>
    {% endif %}
</div>

<div class="container">
    {% include 'wheeldisplay.html' %}
</div>



<br>

    <div class="container">

<h2>Résultats astrologiques pour 
    {% if request.GET.name %} 
        {{ request.GET.name }} 
    {% else %} 
        {{ name }} 
    {% endif %}
</h2>



<p><strong>Date :</strong> {{ local_day_str }} {{ local_month_str }} {{ local_year_str }}</p>

<p><strong>Heure locale :</strong> {{ local_time_str }}</p>
<p><strong>Heure UTC :</strong> {{ utc_time_str }}</p>

<br>

    <h3>Coordonnées géographiques :</h3>
    
<div class="long">
    <div>
    <strong>Latitude :</strong><br>
    {{ location.latitude|floatformat:6 }}°
    </div>
    
    <div>
    <strong>Longitude :</strong><br>
    {{ location.longitude|floatformat:6 }}°
    </div>
</div>

<!-- Deuxième présentation : Avec N/S et E/O -->
<p><strong>Coordonnées géographiques avec directions :</strong></p>
<div class="long">
    <div>
    <strong>Latitude :</strong><br>
    {{ latitude_dms }}
    </div>
    <div>
    <strong>Longitude :</strong><br>
    {{ longitude_dms }}
    </div>
</div>

</div>

<br><br>

<!-- PLANETES -->
<div class="container">
<div class="table-container planets">
<div class="table-wrapper-planetes">
<h3>Positions des planètes :</h3>
<table>
    <thead>
        <tr>
            <th>Maison</th>
            <th>Degré dans le signe</th>
            <th>Signe</th>
            <th>Degré DMS</th>
        </tr>
    </thead>
    <tbody>
        <!-- Débogage - Affichage des données des maisons -->
       

        {% if houses %}
            {% for house, info in houses.items %}
            <tr>
                <td>{{ house }}</td>
                <td>{{ info.sign_degree|degrees_minutes }}</td>
                <td>{{ info.sign }}</td>
                <td>{{ info.degree_dms }}</td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="4">Aucune donnée disponible.</td>
            </tr>
        {% endif %}
    </tbody>
</table>
</div>
</div>
</div>
<!-- / PLANETES -->
<br><br>

<!-- MAISONS -->
<div class="container">
<div class="table-container houses">
<div class="table-wrapper-maisons">
        <h3>Maisons astrologiques :</h3>
<table>
    <thead>
        <tr>
            <th>Maison</th>
            <th>Degré du signe</th>
            <th>Signe</th>
            <th>Degré total</th>
        </tr>
    </thead>
<tbody>
    <!-- Débogage - Affichage des données des maisons -->
    

    {% if houses %}
        {% for house, info in houses.items %}  <!-- Changer ici : items() au lieu de items -->
        <tr>
            <td>{{ house }}</td>
            <td>{{ info.sign_degree|degrees_minutes }}</td>
            <td>{{ info.sign }}</td>
            <td>{{ info.degree_dms }}</td>
        </tr>
        {% endfor %}
    {% else %}
        <tr>
            <td colspan="4">Aucune donnée disponible.</td>
        </tr>
    {% endif %}
</tbody>

</table>

</div>
</div>
</div>
<!-- / MAISONS -->
<br><br>


<!-- ASPECTS -->
<div class="container">
<div class="table-container aspects">
<div class="table-wrapper-aspects">
        <h3>Aspects planétaires :</h3>
<table>
    <thead>
        <tr>
            <th>Aspect</th>
        </tr>
    </thead>
    <tbody>
        <!-- Débogage - Affichage des données des aspects -->
        

        {% if aspects_text %}
            {% for aspect in aspects_text %}
            <tr>
                <td>{{ aspect }}</td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td>Aucun aspect disponible.</td>
            </tr>
        {% endif %}
    </tbody>
</table>

</div>
</div>
</div>
<!-- / ASPECTS -->
<br><br>


<!-- BOUTON RETOUR AU FORMUALIRE -->
<div class="div-bouton">
        <form method="get" action="{% url 'birth_data' %}">
            <input type="hidden" name="reset" value="true">
            <button type="submit">Revenir au formulaire</button>
        </form>
</div>
<!-- / BOUTON RETOUR AU FORMUALIRE -->




    </div>

</body>
</html>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Document sans nom</title>
</head>

<body>
</body>
</html>

